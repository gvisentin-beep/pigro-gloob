<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Gloob — Metodo Pigro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- CSS principale -->
    <link rel="stylesheet" href="/static/style_4.css">

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f6f8;
            margin: 0;
            padding: 20px;
        }
        .card {
            background: white;
            border-radius: 14px;
            padding: 22px;
            margin-bottom: 18px;
            box-shadow: 0 4px 14px rgba(0,0,0,0.06);
        }
        .brand-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 8px;
        }
        .logo {
            height: 54px;
            width: 54px;
            object-fit: contain;
            border-radius: 14px;
        }
        .brand-text {
            display: flex;
            flex-direction: column;
            line-height: 1.05;
        }
        .brand-name {
            font-size: 2.4rem;
            font-weight: 800;
            margin: 0;
            color: #1f3b73;
            letter-spacing: 0.3px;
        }
        .brand-subtitle {
            font-size: 1.05rem;
            font-weight: 700;
            color: #4a5a75;
            margin-top: 4px;
        }
        .intro {
            margin-top: 12px;
            font-size: 1rem;
        }
        ul { margin-top: 10px; }

        .controls label {
            font-weight: 600;
            display: block;
            margin-top: 10px;
            margin-bottom: 4px;
        }
        .slider-row {
            display: flex;
            align-items: center;
            gap: 14px;
        }
        input[type="range"] {
            width: 100%;
            accent-color: #2c5aa0;
        }
        .gold-badge {
            font-weight: 800;
            color: #2c5aa0;
            min-width: 46px;
            text-align: right;
        }
        input[type="text"] {
            padding: 7px 10px;
            border-radius: 10px;
            border: 1px solid #cfd6df;
            width: 140px;
            font-weight: 700;
        }
        .row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        button {
            background: #2c5aa0;
            color: white;
            border: none;
            padding: 9px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
        }
        button:hover { background: #1f3b73; }
        #period {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 6px;
        }
        canvas { max-width: 100%; }
    </style>
</head>

<body>

    <div class="card">
        <div class="brand-header">
            <img src="/static/logo.png" alt="Logo Gloob" class="logo">
            <div class="brand-text">
                <div class="brand-name">Gloob</div>
                <div class="brand-subtitle">Metodo Pigro</div>
            </div>
        </div>

        <div class="intro">
            Il Metodo Pigro: due strumenti globali. Nessuna previsione. Solo disciplina.
        </div>

        <ul>
            <li><b>Pochi strumenti:</b> due mattoni globali</li>
            <li><b>Costi bassi:</b> struttura semplice</li>
            <li><b>Regole chiare:</b> ribilanciamento una volta l’anno</li>
            <li><b>Struttura &gt; Previsioni</b></li>
        </ul>
    </div>

    <div class="card controls">
        <label>Oro (%) (0–50, step 5)</label>
        <div class="slider-row">
            <input id="w_gold" type="range" min="0" max="50" step="5" value="10">
            <span id="gold_badge" class="gold-badge">10%</span>
        </div>

        <label>Capitale (€)</label>
        <div class="row">
            <input id="initial" type="text" value="10.000" inputmode="numeric" aria-label="Capitale in euro">
            <button>Aggiorna</button>
        </div>

        <!-- Riga “di servizio” (nascosta da app.js) -->
        <div style="margin-top:8px;">
            <span id="w_equity"></span>
            <span id="w_bonds"></span>
            <span id="w_gold_show"></span>
        </div>
    </div>

    <div class="card">
        <div><b>Portafoglio (LS80+Oro):</b> Rendimento annualizzato — | Max Ribasso nel periodo —</div>
        <div>Solo LS80: Rendimento annualizzato — | Max Ribasso nel periodo —</div>
        <div id="period"></div>
    </div>

    <div class="card">
        <canvas id="chart" height="120"></canvas>
    </div>

    <!-- Formattazione capitale (10.000) -->
    <script>
        function formatThousandsIT(value) {
            const numeric = String(value || "").replace(/\D/g, "");
            if (!numeric) return "";
            return new Intl.NumberFormat("it-IT", { maximumFractionDigits: 0 }).format(Number(numeric));
        }

        function setCaretToEnd(el) {
            try {
                const len = el.value.length;
                el.setSelectionRange(len, len);
            } catch (_) {}
        }

        window.addEventListener("DOMContentLoaded", () => {
            const capitalInput = document.getElementById("initial");
            if (!capitalInput) return;

            capitalInput.value = formatThousandsIT(capitalInput.value);

            capitalInput.addEventListener("input", function () {
                this.value = formatThousandsIT(this.value);
                setCaretToEnd(this);
            });

            capitalInput.addEventListener("blur", function () {
                this.value = formatThousandsIT(this.value);
            });
        });
    </script>

    <script src="/static/app.js"></script>

</body>
</html>
